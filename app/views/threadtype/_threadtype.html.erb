<style>
  .title_two_line{
    display: -webkit-box;
    overflow: hidden;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }
  .threadtype_icon_img{
    border-radius:0px;
    width: 210px;
    height: 120px;
    object-fit: cover;
  }
</style>
<% leader = User.find_by(id:threadtype.leader_id) %>

<%= link_to("/threadtype/show/"+threadtype.id.to_s,class:"thread_link",style:"display: inline-block;margin: 10px;") do %>
  <% there_be = true %>
  <div class="thread_cover threadtype_cover"style="border-radius: 5px;">
    <div class="icon_cover threadtype_image"style="display: block;">
      <div class="icon_img_cover">
        <% if threadtype.pict.attached? %>
          <%= image_tag threadtype.pict , :class => "threadtype_icon_img",:style => ""%>
        <% else %>
          <%= image_tag("group_icon/flag1.png", :class => "threadtype_icon_img",:style => "") %>
        <% end %>
      </div>
    </div>
    <div class="thread_content threadtype_content"style="width: calc(100% - 10px) !important;height: 137px;">
      <div class="post_content_cover">
        <div class="post_content_position width_max">
          <div class="thread_title">
            <div class="title_padding no_inline"style="width: 200px;">
              <div class="title_two_line">
                <% if threadtype.type == "every" %><%= "「公式」" %><% end %>
                <%= threadtype.type_jp %>
              </div>
              <div class="title_two_line">
                <% if threadtype.type == "every" %><%= "「Official」" %><% end %>
                <%= threadtype.type_en %>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="threadtype_cover threadtype_users">
        <div class="threadtype_user_cover"style="display:none">
          <div class="threadtype_title">
            Manager / 管理者
          </div>
          <div class="threadtype_leader">
            <div class="threadtype_img_cover">
              <% if threadtype.leader_id == 0 %>
                <%= image_tag("frefre_icon2.png", :class => "threadtype_img") %>
              <% else %>
                <%= image_tag("frefre_icon2.png", :class => "threadtype_img") %>
              <% end %>
            </div>
            <div class="threadtype_name">
              <% if threadtype.leader_id == 0 %>
                FreFre Office
              <% else %>
                <%= leader.name %>
              <% end %>
            </div>
          </div>
        </div>
        <% if threadtype.type != "every" %>
          <div class="threadtype_user_cover">
            <div class="threadtype_title"style="display:none">
              Member / メンバー
            </div>
            <div class="threadtype_member">
              <div class="threadtype_img_cover">
                <% threadtype_users = threadtype.users %>
                <% user_sum = threadtype_users.count %>
                <% threadtype_users.limit(3).each do |user|%>
                  <% if user.image == 0 %>
                    <% if user.avater.attached? %>
                      <%= image_tag user.avater , :class => "threadtype_img"%>
                    <% else %>
                      <% if user.photo.nil? %>
                        <%= image_tag("/userimage/user1.png", :class => "threadtype_img") %>
                      <% else %>
                        <%= image_tag show_image_user_path(user), :class => "threadtype_img" %>
                      <% end %>
                    <% end %>
                  <% else %>
                    <%= image_tag("/userimage/user#{user.image}.png", :class => "threadtype_img") %>
                  <% end %>
                <% end %>
                <% if user_sum > 3 %>
                  <div class="user_plus_show">
                    + <%= user_sum - 3 %>
                  </div>
                <% end %>
              </div>
            </div>
          </div>
        <% else %>
          <div class="join_button_cover"style="margin-left: 15px;">
            <%= button_tag type:"button",class:"login_join_button btn mes_button join_button all_join_button" do %>
              <div class="text_box">
                <div class="jp">
                  会員参加 / Compulsory
                </div>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
<% end %>
<% if 1 == 2 %>
  <div class="threadtype_dropdown dropdown"<% if threadtype.type == "every" %>style="margin-top: -70px;"<% end %>>
    <div class="dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
      <span class="caret"></span>
    </div>
    <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
      <div class="one_topic report_button_set">
        <button class="report_threadtype_button none_button"id="<%= threadtype.id %>"style="width:100%">
          <div class="jp">コミュニティを通報する。</div>
          Report this community.
        </button>
      </div>
    </ul>
  </div>
<% end %>
