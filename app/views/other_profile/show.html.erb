<% other_user = User.find_by(id:1) %>
<% if User.find_by(id:params[:id].to_i) %>
  <% other_user = User.find_by(id:params[:id].to_i) %>
<% end %>
<% other_user_id = other_user.id %>
<div class="other_profile profile">
  <div class="profile_sub"style="display:inline-block">
    <div class="profile_picture">
      <% if other_user.image == 0 %>
        <% if other_user.avater.attached? %>
          <%= image_tag other_user.avater , :class => "group_img"%>
        <% else %>
          <% if other_user.photo.nil? %>
            <%= image_tag("/userimage/user1.png", :class => "group_img") %>
          <% else %>
            <%= image_tag show_image_user_path(other_user), :class => "group_img" %>
          <% end %>
        <% end %>
      <% else %>
        <%= image_tag("/userimage/user#{other_user.image}.png", :class => "group_img") %>
      <% end %>
      <div class="name_show"style="font-size:16px">
        <%= simple_format(text_url_to_link(h(other_user.name))) %>
      </div>
    </div>
    <% if logged_in? %>
      <div class="follow_button<%= other_user_id %>">
        <% if logged_in? && current_user.followings.find_by(id: other_user_id) %>
          <%= button_tag type:"button",class:"btn mes_button normal_button fullwidth_button unfollow_button_submit",id:other_user_id do %>
            <span class="glyphicon glyphicon-star icon" aria-hidden="true"></span>
            <div class="text_box">
              <div class="jp">
                フォロー中
              </div>
              <div class="en">
                Following
              </div>
            </div>
          <% end %>
        <% else %>
          <%= button_tag type:"button",class:"btn mes_button normal_button fullwidth_button follow_button_submit",id:other_user_id do %>
            <span class="glyphicon glyphicon-star-empty icon" aria-hidden="true"></span>
            <div class="text_box">
              <div class="jp">
                フォローする
              </div>
              <div class="en">
                Follow
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
      <div class="direct_mes_button">
        <% if logged_in? && a = current_user.notices.eager_load(:users).find_by(id: other_user_id) %>
          <%= link_to "/profile/5/#{a.id}" do %>
            <button class="btn mes_button normal_button green_button fullwidth_button">
              <div class="jp">
                チャットへ飛ぶ
              </div>
              <div class="en">
                Jump to Chat
              </div>
            </button>
          <% end %>
        <% else %>
          <%= link_to "/notice/new/#{params[:id]}" do %>
            <button class="btn mes_button normal_button green_button fullwidth_button">
              <span class="glyphicon glyphicon-envelope icon" aria-hidden="true"></span>
              <div class="text_box">
                <div class="jp">
                  メッセージ
                </div>
                <div class="en">
                  Message
                </div>
              </div>
            </button>
          <% end %>
        <% end %>
      </div>
      <%= button_tag type:"button",class:"btn mes_button normal_button fullwidth_button report_button",id:other_user_id do %>
        <span class="glyphicon glyphicon-exclamation-sign icon" aria-hidden="true"></span>
        <div class="text_box">
          <div class="jp">
            通報する
          </div>
          <div class="en">
            Report
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="profile_main">
    <div class="lang_bar_cover" data-toggle="tooltip" data-placement="bottom" data-original-title="説明">
      <div class="lang_bar">
        <div class="country_flag en_country">
          <%= image_tag "/eng.png", class: "image" %>
        </div>
        <input id="slider" data-slider-id='ex1Slider' type="text" data-slider-min="0"
            data-slider-max="100" data-slider-step="1" data-slider-value="50"/>
        <div class="country_flag jp_country">
          <%= image_tag "jap.png", class: "image" %>
        </div>
      </div>
    </div>
    <div class="profile_page row">
      <div class="profile_page_en">
        <div class="col-sm-12">
          <div class="col-sm-12 profile_content">
            <div class="row profile_content_data">
              <div class="content_name">
                <div class="jp">
                  ユーザーネーム
                </div>
                <div class="en">
                  Username：
                </div>
              </div>
              <div class="profile_content_cover">
                <%= other_user.name %>
              </div>
            </div>
            <div class="row profile_content_data">
              <div class="content_name">
                <div class="jp">
                  ユーザーID
                </div>
                <div class="en">
                  User ID：
                </div>
              </div>
              <div class="profile_content_cover">
                <%= other_user.user_search_id %>
              </div>
            </div>
            <div class="row profile_content_data">
              <div class="content_name">
                <div class="jp">
                  性別
                </div>
                <div class="en">
                  Gender：
                </div>
              </div>
              <div class="profile_content_cover">
                  <% if other_user.gender == "Male" %>
                    <%= "Male / 男性" %>
                  <% elsif other_user.gender == "Female" %>
                    <%= "Female / 女性" %>
                  <% elsif other_user.gender == "Neuter"  %>
                    <%= "Other / その他" %>
                  <% else %>
                    <%= "No answer / 答えない" %>
                  <% end %>
              </div>
            </div>
          </div>

          <div class="profile_content">
            <div class="row profile_content_data">
              <div class="content_name">
                <div class="jp">
                  出身国
                </div>
                <div class="en">
                  Country：
                </div>
              </div>
              <div class="profile_content_cover">
                <% if other_user.country == nil %>
                  <%= "No answer / 答えない" %>
                <% else %>
                  <%= other_user.country %>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="profile_words">
        <div class="profile_content intro_content">
          <div class="intro"style="margin-left: -15px;">
            <div class="row profile_content_data self_introduction">
              <div class="content_name">
                <div class="jp">
                  自己紹介(英語)
                </div>
                <div class="en">
                  Introduction
                  (English)
                </div>
              </div>
              <div class="profile_intro_data">
                <% if other_user.profile_en == nil %>
                  Blank / 空
                <% else%>
                  <%= other_user.profile_en%>
                <% end %>
              </div>
            </div>
          </div>
          <div class="intro">
            <div class="row profile_content_data self_introduction">
              <div class=" content_name">
                <div class="jp">
                  自己紹介(日本語)
                </div>
                <div class="en">
                  Introduction
                  (Japanese)
                </div>
              </div>
              <div class="profile_intro_data">
                <% if other_user.profile_jp == nil %>
                  Blank / 空
                <% else%>
                  <%=other_user.profile_jp%>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
      <ul class="nav nav-tabs nav-top" id="myTab" role="tablist">
        <li class="nav-item <% if params[:page] == nil || params[:page] == "1" %>active<% end %>">
          <a class="nav-link profile_history_change3" id="popular-tab" data-toggle="tab" href="#popular" role="tab" aria-controls="popular" aria-selected="false">
            <i class="fas fa-users"></i>
            <div class="text_cover">
              <div class="jp">
                参加したコミュニティ
              </div>
              <div class="en">
                Join Community
              </div>
            </div>
          </a>
        </li>
        <li class="nav-item <% if params[:page] == "2" %>active<% end %>">
          <a class="nav-link profile_history_change4" id="latest-tab" data-toggle="tab" href="#group" role="tab" aria-controls="group" aria-selected="false">
            <i class="fas fa-users"></i>
            <div class="text_cover">
              <div class="jp">
                作成したコミュニティ
              </div>
              <div class="en">
                Made Community
              </div>
            </div>
          </a>
        </li>
        <li class="nav-item <% if params[:page] == "3" %>active<% end %>">
          <a class="nav-link profile_history_change4" id="latest-tab" data-toggle="tab" href="#thread" role="tab" aria-controls="thread" aria-selected="false">
            <i class="fas fa-comments"></i>
            <div class="text_cover">
              <div class="jp">
                過去のスレッド
              </div>
              <div class="en">
                Past Thread
              </div>
            </div>
          </a>
        </li>
        <li class="nav-item <% if params[:page] == "4" %>active<% end %>">
          <a class="nav-link profile_history_change4" id="latest-tab" data-toggle="tab" href="#post" role="tab" aria-controls="post" aria-selected="false">
            <i class="fas fa-comment-dots"></i>
            <div class="text_cover">
              <div class="jp">
                過去の投稿
              </div>
              <div class="en">
                Past Post
              </div>
            </div>
          </a>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane active" id="popular" role="tabpanel" aria-labelledby="popular-tab">
          <% there_be = false %>
          <% if @join_groups != nil %>
            <% @join_groups.each do |threadtype| %>
              <% there_be = true %>
              <%= render partial:"/threadtype/threadtype", locals: { threadtype:threadtype } %>
            <% end %>
          <% end %>
        </div>
        <div class="tab-pane fade" id="group" role="tabpanel" aria-labelledby="group-tab">
          <% show_group_id = -1 %>
          <% there_be = false %>
          <% if @make_groups != nil %>
            <% @make_groups.each do |threadtype| %>
              <% there_be = true %>
              <%= render partial:"/threadtype/threadtype_edit", locals: { threadtype:threadtype } %>
            <% end %>
          <% end %>
        </div>
        <div class="tab-pane fade" id="thread" role="tabpanel" aria-labelledby="thread-tab">
          <% show_group_id = -1 %>
          <% there_be = false %>
          <% if @make_threads != nil %>
            <% @make_threads.each do |group| %>
              <% there_be = true %>
              <%= render partial:"/groups/group", locals: { group:group,type:"normal" } %>
            <% end %>
          <% end %>
        </div>
        <div class="tab-pane fade" id="post" role="tabpanel" aria-labelledby="post-tab">
          <% show_group_id = -1 %>
          <% there_be = false %>
          <% if @make_posts != nil %>
            <% @make_posts.each do |post| %>
              <% there_be = true %>
              <%= render partial: 'posts/post' ,locals: { post:post,type:"normal"} %>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="profile_modal">
  <div class="modal fade" id="follow_modal" tabindex="-1">
  	<div class="modal-dialog"style="width:90vw">
  		<div class="modal-content">
  			<div class="modal-body">
          <div class="text_box">
            <div class="text_jp">
              フォローを解除してもよろしいですか？
            </div>
            <div class="text_en">
              Is it ok to unfollow him or her?
            </div>
          </div>
  			</div>
        <div class="modal-footer follow_modal_footer">
          <button type="button" class="btn btn-primary unfollow_modal_submit follow_modal_button">
            <div class="jp">
              実行
            </div>
            <div class="en">
              OK
            </div>
          </button>
          <button type="button" class="btn btn-default follow_modal_button" data-dismiss="modal">
            <div class="jp">
              戻る
            </div>
            <div class="en">
              Back
            </div>
          </button>
        </div>
  		</div>
  	</div>
  </div>
</div>

<div class="profile_modal">
  <div class="modal fade" id="report_user_modal" tabindex="-1">
  	<div class="modal-dialog"style="width:90vw">
      <%= form_tag('/report/user',method: :post,class: "search_form_top") do %>
    		<div class="modal-content">
    			<div class="modal-body">
            <div class="title">
              通報の理由 / Report Reason
            </div>
            <%= radio_button_tag :type, 4 ,"checked"%>不適切な投稿 / Sensitive Content<br>
            <%= radio_button_tag :type, 1 %>乗っ取られたアカウント / Hacked Account<br>
            <%= radio_button_tag :type, 2 %>偽のアカウント / False Account<br>
            <%= radio_button_tag :type, 3 %>その他 / Other<br>
            <div class="title"style="margin-top:10px;margin-bottom:5px;">
              具体的な内容 / Specific Content
            </div>
            <%= text_area_tag :content, "",class: "base_en_form connect_btn content_post form-control" ,rows:"6" %>
    			</div>
          <div class="modal-footer follow_modal_footer">
            <%= hidden_field_tag :report_id,other_user_id, class: "form-control form_input" %>
            <button type="submit" class="btn btn-primary report_button_submit">
              <div class="jp">
                送信
              </div>
              <div class="en">
                Send
              </div>
            </button>
            <button type="button" class="btn btn-default" data-dismiss="modal">
              <div class="jp">
                戻る
              </div>
              <div class="en">
                Back
              </div>
            </button>
          </div>
    		</div>
      <% end %>
  	</div>
  </div>
</div>
